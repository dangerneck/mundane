!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=309)}({309:function(e,t,n){e.exports=n(310)},310:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t);var o=new(n(60).default)(window,function(e){return console.log("Mundane All before",e)},function(e){return console.log("Mundane All after",e)},function(e){return console.log("Mundane error",e)}),u=0,c=Date.now(),i=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";"object"===r(e)?e instanceof CustomEvent?(console.log(e),t=e.type+" "+e.detail.data):t=e.type:"string"==typeof e&&(t=e);var o=document.getElementById("result-town"),i=document.getElementById(n);i||((i=document.createElement("div")).setAttribute("id",n),o.appendChild(i));var a=document.createElement("p"),s=document.createElement("strong"),f=Date.now(),l=f-c;c=f,s.textContent=u+". || "+f+" || +"+l+"ms || ",u+=1;var p=document.createElement("span");p.textContent=t,i.insertBefore(a,i.firstChild),a.appendChild(s),a.appendChild(p)};o.observe("hello",i,function(){return i("before hello observed")},function(){return i("after hello observed")},function(){return o.sleep(350)}),o.observe("click",i,function(){return i("before click observed")},function(){return i("500ms after click observed")},function(){return o.sleep(500)});[o.make("hello",{data:1e3}),o.make("hello",{data:2e3}),o.make("hello",{data:3e3}),o.make("hello",{data:4e3})].forEach(function(e,t){o.occurIn(1e3*t,e,function(){},function(){})}),o.sequence([{afterMs:4500,func:function(){return i("HERE COMES A SEQUENCE ~~~")}},{afterMs:500,func:function(){return i("sequence step 1")}},{afterMs:120,func:function(){return i("sequence step 2")}},{afterMs:250,func:function(){return i("sequence step 3")}},{afterMs:500,func:function(){return i("sequence step 4")}},{afterMs:600,func:function(){return i("sequence step 5")}},{afterMs:300,func:function(){return i("sequence step 6")}}],function(e,t,n){return i("seqStart: ".concat(t," ~ ")+"seq delta: ".concat(Date.now()-t," ~ ")+"afterMs: ".concat(e.step.afterMs," ~ "))}),o.sequence([{afterMs:5e3,func:function(){return i("ANOTHER SEQUENCE ~~~")}},{afterMs:250,func:function(){return i("ANOTHER sequence step 1")}},{afterMs:250,func:function(){return i("ANOTHER sequence step 2")}},{afterMs:250,func:function(){return i("ANOTHER sequence step 3")}},{afterMs:250,func:function(){return i("ANOTHER sequence step 4")}},{afterMs:250,func:function(){return i("ANOTHER sequence step 5")}},{afterMs:250,func:function(){return i("ANOTHER sequence step 6")}}],function(e,t,n){return i("seqStart: ".concat(t," ~ ")+"seq delta: ".concat(Date.now()-t," ~ ")+"afterMs: ".concat(e.step.afterMs," ~ "))}),o.sequence([{afterMs:125,func:function(){i("tick","tickbox")}}],function(e,t,n){},!0)},60:function(e,t,n){"use strict";function r(e,t,n,r,o,u,c){try{var i=e[u](c),a=i.value}catch(e){return void n(e)}i.done?t(a):Promise.resolve(a).then(r,o)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){var t;if("function"==typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}function i(e){var t,n;function r(t,n){try{var u=e[t](n),c=u.value,i=c instanceof a;Promise.resolve(i?c.wrapped:c).then(function(e){i?r("next",e):o(u.done?"return":"normal",e)},function(e){r("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,o){return new Promise(function(u,c){var i={key:e,arg:o,resolve:u,reject:c,next:null};n?n=n.next=i:(t=n=i,r(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}function a(e){this.wrapped=e}n.r(t),n.d(t,"default",function(){return s}),"function"==typeof Symbol&&Symbol.asyncIterator&&(i.prototype[Symbol.asyncIterator]=function(){return this}),i.prototype.next=function(e){return this._invoke("next",e)},i.prototype.throw=function(e){return this._invoke("throw",e)},i.prototype.return=function(e){return this._invoke("return",e)};var s=function(){function e(t,n,r,o,c){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"beforeMev",void 0),u(this,"afterMev",void 0),u(this,"onMevError",void 0),u(this,"ctx",void 0),u(this,"mundaneLog",void 0),u(this,"creeps",void 0),u(this,"options",void 0),u(this,"observedSequenceTrie",void 0),u(this,"observedSequenceCallbacks",void 0),this.ctx=t||window||{},this.beforeMev=n||function(e){return null},this.afterMev=r||function(e){return null},this.onMevError=o||function(e){return null},this.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){u(e,t,n[t])})}return e}({logging:{disposeLogs:function(){i.mundaneLog=[]},keepLog:!0,log:function(e){i.mundaneLog.unshift({m:e,t:Date.now()})},maxLogs:1/0}},c),this.creeps=[],this.mundaneLog=[]}var t,n,s,f,l;return t=e,(n=[{key:"sleep",value:function(e){return new Promise(function(t,n){setTimeout(t,e)})}},{key:"make",value:function(e,t){return new CustomEvent(e,{detail:t})}},{key:"hookAndPromise",value:function(e,t,n,r,o){return function(u){n&&n.call(e,u);var c=t(u);if(o){var i=o(u);return i.then?i.then(function(t){r&&r.call(e,u,c,t)}):(console.warn("event promise generator did not return a promise",i),i)}return r&&r.call(e,u,c)}}},{key:"occur",value:function(e,t,n,r){var o=this,u=this.hookAndPromise(this.ctx,function(t){return o.ctx.dispatchEvent(e)},t,n,function(t){return r||Promise.resolve(e)});this.beforeMev(e),this.options.logging.keepLog&&this.options.logging.log(e);var c=u(e);return c instanceof Promise?c.then(function(){o.afterMev(e)}):(this.afterMev(e),c)}},{key:"occurIn",value:function(e,t,n,r,o){var u=this;return this.sleep(e).then(function(){return u.occur(t,n,r,o)})}},{key:"schedule",value:function(e,t){var n,r=this;return(n=regeneratorRuntime.mark(function n(){var o,u,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:o=0,Date.now();case 2:if(!(o<=e.length)){n.next=17;break}if(u=e[o],c=Date.now(),o+=1,u){n.next=8;break}return n.abrupt("return");case 8:if(!u.afterMs){n.next=11;break}return n.next=11,new a(r.sleep(u.afterMs));case 11:return n.next=13,{step:u,result:u.func.call(r),_stepStart:c};case 13:t&&o===e.length&&(o=0),c,n.next=2;break;case 17:case"end":return n.stop()}},n,this)}),function(){return new i(n.apply(this,arguments))})()}},{key:"sequence",value:(f=regeneratorRuntime.mark(function e(t,n,r){var o,u,i,a,s,f,l,p,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=Date.now(),u=!0,i=!1,e.prev=3,s=c(this.schedule(t,r));case 5:return e.next=7,s.next();case 7:return f=e.sent,u=f.done,e.next=11,f.value;case 11:if(l=e.sent,u){e.next=20;break}p=l,console.log("sequence step",this,p),v=Date.now(),n&&n.call(this,p,o,v);case 17:u=!0,e.next=5;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(3),i=!0,a=e.t0;case 26:if(e.prev=26,e.prev=27,u||null==s.return){e.next=31;break}return e.next=31,s.return();case 31:if(e.prev=31,!i){e.next=34;break}throw a;case 34:return e.finish(31);case 35:return e.finish(26);case 36:case"end":return e.stop()}},e,this,[[3,22,26,36],[27,,31,35]])}),l=function(){var e=this,t=arguments;return new Promise(function(n,o){var u=f.apply(e,t);function c(e){r(u,n,o,c,i,"next",e)}function i(e){r(u,n,o,c,i,"throw",e)}c(void 0)})},function(e,t,n){return l.apply(this,arguments)})},{key:"observe",value:function(e,t,n,r,o,u){var c=u||this.ctx,i=this.hookAndPromise(c,t,n,r,o);c.addEventListener(e,i),this.creeps.unshift({hookedReaction:i,mevName:e,subject:c})}},{key:"stop",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.creeps[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var u=r.value;u.subject.removeEventListener(u.mevName,u.hookedReaction)}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}}])&&o(t.prototype,n),s&&o(t,s),e}()}});